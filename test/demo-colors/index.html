<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Gill Testing Ground</title>
</head>
<body>
  <canvas
    height  = "344"
    id      = "my_canvas"
    style   = "background-color: black;"
    width   = "684"
  ></canvas>

  <script src="/gill.js"></script>

  <script>
    //==========================================
    //    ~~~~  ~~~~  USING GILL  ~~~~  ~~~~
    //==========================================

    // Create Rendering Program

    const fragmentShaderSource = `
      varying highp   vec3  vColor;

      uniform mediump float uOpacity;

      void main(void)
      {
        gl_FragColor = vec4(vColor, uOpacity);
      }
    `;

    const vertexShaderSource = `
      attribute vec2 aPosition;
      attribute vec3 aColor;

      uniform float uLayer;

      varying vec3  vColor;

      void main(void)
      {
        gl_Position = vec4(aPosition, uLayer, 1.0);
        vColor = aColor;
      }
    `;

    let gillProgram = gill.getProgram(
                        vertexShaderSource,
                        fragmentShaderSource
                      );

    // Create a rectangle

    let rectangle = gill.createModel(),
        rVertex1  = gill.createVertex(),
        rVertex2  = gill.createVertex(),
        rVertex3  = gill.createVertex(),
        rVertex4  = gill.createVertex();

    // WebGL uniforms are applied to all vertices rendered per draw. Therefore, they are set at the model-level.

    rectangle.setUniform(
      "uLayer",
      gill.createNumber(
        0.5
      )
    )
    .setUniform(
      "uOpacity",
      gill.createNumber(
        1.0
      )
    );

    // WebGL attributes are applied per vertex per draw. Therefore, they are set at the vertex-level.

    // Upper-left vertex

    rVertex1.setAttribute(
      "aPosition",
      gill.createVector2(
        -0.5,
         0.5
      )
    ).setAttribute(
      "aColor",
      gill.createVector3(
        1.0,
        0.0,
        0.0
      )
    );

    // Upper-right vertex

    rVertex2.setAttribute(
      "aPosition",
      gill.createVector2(
        0.5,
        0.5
      )
    ).setAttribute(
      "aColor",
      gill.createVector3(
        1.0,
        0.0,
        1.0
      )
    );

    // Lower-right vertex

    rVertex3.setAttribute(
      "aPosition",
      gill.createVector2(
         0.5,
        -0.5
      )
    ).setAttribute(
      "aColor",
      gill.createVector3(
        0.0,
        0.0,
        1.0
      )
    );

    // Lower-left vertex

    rVertex4.setAttribute(
      "aPosition",
      gill.createVector2(
        -0.5,
        -0.5
      )
    ).setAttribute(
      "aColor",
      gill.createVector3(
        1.0,
        0.0,
        1.0
      )
    );

    // Triangle One (upper left)

    rectangle.addVertex(
      rVertex1
    )
    .addVertex(
      rVertex2
    )
    .addVertex(
      rVertex4
    );

    // Triangle Two (lower right)

    rectangle.addVertex(
      rVertex4
    )
    .addVertex(
      rVertex2
    )
    .addVertex(
      rVertex3
    );

    // Create a Square

    let square    = gill.createModel(),
        sVertex1  = gill.createVertex(),
        sVertex2  = gill.createVertex(),
        sVertex3  = gill.createVertex(),
        sVertex4  = gill.createVertex();

    square.setUniform(
      "uLayer",
      gill.createNumber(
        0.75
      )
    )
    .setUniform(
      "uOpacity",
      gill.createNumber(
        0.5
      )
    );

    // Upper-left vertex

    sVertex1.setAttribute(
      "aPosition",
      gill.createVector2(
        -0.25,
         0.5
      )
    ).setAttribute(
      "aColor",
      gill.createVector3(
        1.0,
        1.0,
        1.0
      )
    );

    // Upper-right vertex

    sVertex2.setAttribute(
      "aPosition",
      gill.createVector2(
        0.25,
        0.5
      )
    ).setAttribute(
      "aColor",
      gill.createVector3(
        1.0,
        1.0,
        1.0
      )
    );

    // Lower-right vertex

    sVertex3.setAttribute(
      "aPosition",
      gill.createVector2(
         0.25,
        -0.5
      )
    ).setAttribute(
      "aColor",
      gill.createVector3(
        1.0,
        1.0,
        1.0
      )
    );

    // Lower-left vertex

    sVertex4.setAttribute(
      "aPosition",
      gill.createVector2(
        -0.25,
        -0.5
      )
    ).setAttribute(
      "aColor",
      gill.createVector3(
        1.0,
        1.0,
        1.0
      )
    );

    // Triangle One (upper left)

    square.addVertex(
      sVertex1
    )
    .addVertex(
      sVertex2
    )
    .addVertex(
      sVertex4
    );

    // Triangle Two (lower right)

    square.addVertex(
      sVertex4
    )
    .addVertex(
      sVertex2
    )
    .addVertex(
      sVertex3
    );

    // Get the canvas

    const canvas = document.getElementById("my_canvas");

    // Draw it

    gill.clearCanvas(
      canvas
    );

    gill.render(
      rectangle,
      canvas,
      gillProgram
    );

    gill.render(
      square,
      canvas,
      gillProgram
    );
  </script>
</body>
</html>